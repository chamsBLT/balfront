---
# tasks file for docker
- name: Create docker image
  docker_image:
    name: cd
    build:
      path: /var/jenkins/slave/workspace/cd_project
      pull: 'no'
    source: build
    state: present
    force_source: true
- name: Run docker container
  docker_container:
    name: cd_container
    image: cd:latest
    state: started
    recreate: true
    ports:
     - "4202:80"
- name: Tag and push to docker hub
  docker_image:
    name: cd
    repository: chxws/cd
    tag: latest
    push: yes
